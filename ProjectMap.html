<!--
The following code comes from ESRI ArcGIS Online SDK for Javascript example of layerlist Widget.

https://developers.arcgis.com/javascript/latest/sample-code/widgets-layerlist/
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Sichuan Religions Project Map</title>
  <style>
    #viewDiv {
      padding: 0;
      margin: auto;
      height: 550pt;
      width: 90%;
      position: relative;
    }
  </style>
  <link rel="stylesheet" href="https://js.arcgis.com/4.29/esri/themes/light/main.css">
  <script src="https://js.arcgis.com/4.29/"></script>

  <script>
    require([
      "esri/config",
      "esri/views/MapView",
      "esri/widgets/ScaleBar",
      "esri/widgets/Home",
      "esri/widgets/Expand",
      "esri/widgets/LayerList",
      "esri/WebMap"
    ], (esriConfig, MapView, ScaleBar, Home, Expand, LayerList, WebMap) => {
      esriConfig.apiKey = "AAPTxy8BH1VEsoebNVZXo8HurJak9CPH5_OFjiHujg4DhDrDXBndAKKZlYHnWI0YG_17hBmKL7WdjAeoIv4ePJUAfUmEWGfwmdnm3VE_L2dRQCuSlzTQorJXJ64CHnpdKP1Z3CdKIapGtg2PwTr_D8JCyx0CURbjdLvzbcKFhBiFSZGfgtQD2LzXVLXFT_Z_n_15-1mB9YKDHUvyEfGAjCcfR24wTPQ7Q44XOq0xaP2c02y6ab0TiT3kQ0ogBVGE8V_9ruzuGjm6wfLBUbatd9M-lo5xfB1ab8aKQumQEbgj99hUw88QunMi17mJtZK4lhxyfvDucMLFQ5eUV3YHn3O1QQ..AT1_fGP0u66a";
      const webmap = new WebMap({
        portalItem: {
          id: "7ffa8f2449824e7bb4003e409894f9d9"
        }
      });

      const view = new MapView({
        container: "viewDiv",
        map: webmap
      });

      view.popup.dockOptions = {
        breakpoint: false,
        buttonEnabled: false,
        breakpoint: {
          width: 1200,
          height: 1200
        },
        position: "top-left"
      };

      const scalebar = new ScaleBar({
        view: view
      });
      view.ui.add(scalebar, "bottom-left");

      const homeBtn = new Home({
        view: view
      });
      view.ui.add(homeBtn, "top-left");

      const instructionsExpand = new Expand({
        expandIcon: "question",
        expandTooltip: "How to use this map",
        view: view,
        expanded: true,
        content: `
        <div style='width:300px; padding:10px; background-color:white'>
          <b>Click</b> on the upper right pane to deselect sites based on type.<br> 
          <b>Zoom in</b> to see the full names of the sites.<br>
          <b>Click</b> on site pointers to see more informationt</div>
        `
      });
      view.ui.add(instructionsExpand, "top-left");

      view.when(() => {
        const layerList = new LayerList({
          view: view
        });
        // Add widget to the top right corner of the view
        view.ui.add(layerList, "top-right");
      });
    });
  </script>
</head>

<body>
    <h1 style="font-size: 25px;position: relative;
    font-family: Arial, Helvetica, sans-serif;
    text-align: center;margin:1%">Sichuan Religion Project Map</h1>

  <div id="viewDiv" style="position:relative"></div>

  <div class="footer" style="text-align:center">
    <p style="font-size: small;">Projrect created and maintained by <a href="https://github.com/ywzhou997/">Yuwei Zhou</a></p>
  </div>

</body>

</html>